# 持续时间可视化 & AI 分析 — 最小化测试步骤

## 1. 持续时间色块（今日情绪波动图）

1. 启动应用：`npm run dev`，打开 http://localhost:3000
2. 确保当前选中的是「今天」（底部 Tab 为时间线）。
3. 点击右下角「+」或任意一条已有记录，打开记录表单。
4. 选择任意心情（如「平静」），写一句话，在 **持续时间** 输入框填写例如：`1小时` 或 `30分钟`。
5. 保存后回到首页。若今天已有至少一条记录，会看到「今日情绪波动」卡片。
6. **预期**：该条记录在时间轴上对应的时间段内，会出现一条**半透明彩色背景条**（颜色与该心情一致），不遮挡蓝线和柱子。
7. 再添加一条带持续时间的记录（不同心情、不同时间），图中应出现第二条色块；未填持续时间的记录不会有色块。

## 2. AI 分析是否使用 duration

1. 在「分析」Tab 选择包含「有持续时间」记录的日期范围。
2. 触发一次分析（或等待自动分析）。
3. **预期**：分析结果（总评、低谷/高峰描述）中，若模型正常响应，会体现「持续了多久」或对长时间情绪给予更多权重（例如提到「焦虑持续了较长时间」等）。  
   （依赖 DeepSeek 接口与网络，若未体现可查看请求 payload 是否包含 `durationMinutes` 字段以确认数据已传入。）

## 3. 快速自检（无 UI）

在项目根目录执行构建，确认无编译错误：

```bash
npm run build
```

若构建通过，则 `DailyMoodChart` 的 `ReferenceArea` 与 `geminiService.analyzeMoods` 的 duration 改动已正确参与编译。
