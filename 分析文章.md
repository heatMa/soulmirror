​我一直想要开发出一个写日记的APP，市面上的几款都不能完全满足自己的要求。


整个流程是这样的，一开始Google AI Studio，我在上面让他帮我设计了一个前端的页面。但是等我想把它做成APP的时候，我发现比较麻烦的，因为谷歌的它所发布的网页主要还是网页端的，手机上并不适用。所以把源代码克隆了下来，发给了Cloud Code，让他帮我改成手机端的。

# Google AI Studio
## 优势

1. 你不需要配置各种各样的环境，直接在聊天框里提出你想设计的东西，它就能够直接渲染出一个网页。它是即时反馈的，对于纯小白来说难度极低，极为友好。

2. 它能够支持框选。比如对于 UI 界面上你认为哪一点没有修好，你可以添加框、画箭头直接进行指示。这种指示描述给 AI 下达的指令会更加明确。

## 问题
1. 后面用的越多它越卡，修改的时间很慢，我不知道是什么原因。而且它一直都只是一个窗口，并不能新建窗口。这可能就会遇到上下文污染的问题，没法处理
2. 我需要用到 AI 分析，但是使用谷歌的话，它默认只能在这个平台上使用，因为它调用的是谷歌 Gemini 的 API。

如果我想修改成使用 DeepSeek 的话，需要单独再适配

因为后面就交给 Claude Code 修改源码了，所以这块就没有继续再探索。但是我觉得，如果你想要快速地做一个原型验证的话，用 Google AI Studio 是非常合适的。

```
我要设计一款AI疗愈日记的APP，设计理念是，每当我心里开心或者不开心，冒出什么情绪的时候，我就打开这个软件记录，描述我当前的心情。
需求分为记录和分析两块
记录
记录现在的时间和我的心情关键字，以及我描述的具体内容。如"开心， 刚刚面试通过了，非常高兴。"
当一天过去，我回顾当天的时候，我的这些日记应该是按一个时间轴倒序排列的，即最新的时间在上面，让我能清楚地看到我一天中的情绪变化。
分析
AI在这个过程中就是我的人生教练，它能够直接读取记录日记中的数据库。AI帮我识别出来我这一天/周/月的心情晴雨表，哪些是好的时间段，哪些是心情差的时间段，给我一些最有用的建议
```
## 美好时光 技术框架与核心思想

### 核心技术栈

| 层级 | 技术方案 |
|------|----------|
| 前端框架 | React 19 + TypeScript |
| 构建工具 | Vite 6 |
| 样式方案 | Tailwind CSS |
| 跨平台方案 | **Capacitor 8** |
| 数据存储 | SQLite (Android) / localStorage (Web) |
| AI 服务 | DeepSeek API |
| 部署平台 | Cloudflare Pages + Workers |

### 核心思想

**美好时光**（原名 SoulMirror/心灵镜像）是一款 AI 驱动的情绪疗愈日记应用：

1. **能量可视化**：将抽象情绪转化为 -10 ~ +10 的"能量值"，以电池形式直观呈现每日心理能量变化
2. **AI 深度洞察**：基于日记内容提供情绪评分、暖心回复、调节建议和周期性反思
3. **隐私优先**：数据完全本地存储，AI 仅作为分析助手，不保留用户数据

### 开发历程

```
Google AI Studio 原型
        ↓
    导出源码
        ↓
Claude Code + Kimi Code 协作开发
        ↓
   Capacitor 跨平台改造
        ↓
   Web + Android App 双端可用
```

**关键转折**：借助 Capacitor 将 Web 应用封装为原生 Android 应用，实现「一套代码，多端运行」，大幅降低移动端开发成本。

我来为你逐一解答这些技术问题，用通俗的方式解释给非技术背景的读者。

---

## 技术栈详解

### 0. 从 Google AI Studio 移植到安卓，需要做什么？

Google AI Studio 生成的是一个**纯网页应用**，要变成手机 App 需要解决三个问题：

| 问题 | 解决方案 |
|------|----------|
| 怎么在手机上安装？ | 用 **Capacitor** 把网页"套壳"成原生 App |
| 数据存在哪里？ | 网页用 localStorage，手机用 **SQLite 数据库** |
| 怎么调用手机功能？ | Capacitor 提供原生插件（分享、文件系统等） |

**实际步骤**：安装 Capacitor → 配置 Android 项目 → 构建 Web 资源 → 同步到安卓 → 用 Android Studio 打包 APK

---

### 1. 为什么选择 Cloudflare？Pages 和 Workers 的区别？

**Cloudflare 的优势**：
- 国内访问速度快（有香港、新加坡节点）
- 免费额度 generous，个人项目零成本
- 一站式解决部署 + AI 代理

**Pages vs Workers 的区别**：

```
┌─────────────────┐    ┌─────────────────┐
│  Cloudflare     │    │  Cloudflare     │
│     Pages       │    │    Workers      │
├─────────────────┤    ├─────────────────┤
│  托管前端网页    │    │  运行后端代码    │
│  (HTML/CSS/JS)  │    │  (JavaScript)   │
├─────────────────┤    ├─────────────────┤
│  用户直接访问    │    │  保护 API Key   │
│  展示界面        │    │  转发 AI 请求   │
└─────────────────┘    └─────────────────┘
        ↓                       ↓
   用户看到的 App            AI 服务代理
```

**通俗理解**：Pages 是"门面"，Workers 是"保镖"——它帮你保管 DeepSeek API Key，防止泄露。

---

### 2. 为什么选择 React 19 + TypeScript？

这是 **Google AI Studio 生成的默认技术栈**，我没有改动它。

**为什么 AI Studio 选这套方案**：

| 技术 | 作用 |
|------|------|
| **React** | 流行的前端框架，组件化开发，社区生态丰富 |
| **TypeScript** | 在 JavaScript 基础上加了"类型检查"，减少 Bug |
| **React 19** | 最新版本，支持更好的 AI 流式输出 |

---

### 3. 为什么选择 Tailwind CSS？

同样是 **Google AI Studio 自带的方案**。

它的特点是**"原子化 CSS"**——不写传统 CSS 文件，直接在 HTML 里写类名：

```html
<!-- 传统方式 -->
<div class="card">
  <h1 class="title">标题</h1>
</div>
<!-- 还要额外写 .card { padding: 20px; border-radius: 8px } -->

<!-- Tailwind 方式 -->
<div class="p-5 rounded-lg bg-white shadow">
  <h1 class="text-xl font-bold">标题</h1>
</div>
```

**优势**：开发快、样式不冲突、适合快速原型。

---

### 4. Capacitor 的优势是什么？

Capacitor 是**跨平台方案**的一种，同类还有 Cordova、React Native、Flutter 等。

**Capacitor 的核心优势**：

| 优势 | 说明 |
|------|------|
| **Web 技术栈** | 用 HTML/CSS/JS 就能做 App，不需要学 Java/Kotlin |
| **一份代码** | 网页端和移动端共用 99% 代码 |
| **渐进式** | 现有网页项目可以随时"加壳"成 App |
| **原生插件** | 需要时调用相机、存储、分享等手机功能 |

**对比其他方案**：

```
React Native: 要重写 UI 组件，学习成本高
Flutter: 要学 Dart 语言，生态相对小
Capacitor: 网页直接打包，最适合快速迁移 Web 项目 ✓
```

---

### 5. 总结：哪些来自 Google AI Studio？

| 组件 | 来源 |
|------|------|
| React 19 + TypeScript | ✅ Google AI Studio 生成 |
| Tailwind CSS | ✅ Google AI Studio 生成 |
| Vite 构建工具 | ✅ Google AI Studio 生成 |
| Capacitor 跨平台 | ❌ claude后续添加 |
| Cloudflare 部署 | ❌ claude后续配置 |
| SQLite 数据存储 | ❌ claude后续适配 |

---

## 一句话总结

> **Google AI Studio 给了我一个"网页版原型"，我通过 Capacitor 把它"封装"成了手机 App，同时用 Cloudflare 解决了部署和 AI 代理问题——全程没有重写代码，只是做了"适配层"的工作。**

这样的技术路线非常适合**个人开发者**：用 AI 快速生成 MVP，再用低成本方案扩展到多端。


Deepseek的Key自己充了10块钱，那就因为这个Key的调用非常便宜，所以到现在才用了5毛钱。因为每一次记录输入是比较多的，输出都是 AI 精简回复，而一般的 AI 输入都要比输出便宜，所以消费非常低。

一开始使用的是公司配额的Cloud Code，这个真的是刷刷刷往上涨，而且自己也没有太多的经验，可能一星期的时间就用了500美元。后来我自己买了个Kimi Code。199的套餐又开发了几个功能。不得不说，这相比于Cloud Code还是差的挺远的。我最后都快被逼疯了。但最后却还是有了一个比较好的方案。





# 开发经验
在使用 Claude Code 的过程中，有几条经验值得分享：

1. 使用 askUserQuestion 这个方法
   当你每想加一个功能时，都要先让 Claude 跟你确认，这点很重要。它比 Plan 模式更好用，原因如下：
(a) Plan 模式虽然调用了 askUserQuestion，但并没有提供可交互的选项。
(b) 而直接使用 askUserQuestion 是可交互的。
2. 使用Git Worktree，这样可以开很多个Agent的窗口，让它们并行地去修改代码，而不会有冲突。
3. 对于网页端的应用，其实 Claude 是能够自己去查看这个窗口的。所以，你可以给它下发指令，让它直接去运行，并且查看功能是否符合预期。
4. 使用pencil设计前端，但是我没有使用


# 教训
如果这件事情我重新做的话，我会怎么做？
第一步先要把自己的需求完全想清楚。不要那么猴急的，一上来就去写代码，想要先去看一个原型。先把自己的核心需求写清楚，以及你想要的界面也都写出来。

其实这个AI日记我一共做了三版。第一版是我直接在柯泽里边让他帮我做的。柯泽它采用的框架是Flutter的框架，这个框架同时支持iOS、安卓和网页版。那在这个过程中，你还需要配置安卓Studio的开发环境，在这个开发环境里边build出自己的SDK，还有装Flutter框架。这些我在公司的电脑上装了之后，在自己的电脑上装不起来了，也不知道是啥问题。也需要装一个模拟器。这些反正自己都趟了一遍，我认为还是非常有必要记录一下，给大家分享的。

一开始也不知道这个模拟器是怎么用的，整个框架是咋样？但是没关系，一步一步问cloud code，问cloud code，它总会给出结果的

第二个版本是在我总结出来之后所开发出来的一个版本。我希望我把我的需求全部都描绘得非常清楚，并且也有一些原型的展示图给它。但是感觉做的不是特别好，这个版本就暂时放弃了。对了，在这个过程中还有Pencil可以使用，它可以先帮你做出一些漂亮的前端。而这些前端是可以直接编辑的。







我想要开发出来这个AI日记的核心功能，是因为我这个人是一个非常多愁善感的人，然后每天都会有挺多的负面情绪，我把它大概分一个类，可能会有焦虑啊、内耗啊、无精力、心慌的不行等等。我希望每当我出现这种负面情绪的时候，我能够把它们记录下来，然后在我记录下的一刻开始，AI可以给我一个暖心的回复，比如说我现在又因为某件事内耗，然后我记录完之后，AI可以马上给我一个回复说你现在不需要内耗，根据我是一个什么什么大师，比如说像纳瓦尔巴菲特、芒格巴菲特、查理芒格等等，他们能够给我一个具体的鸡汤也好，或者是什么也好。我期望的是，他的回复能够带给我力量，能够让我走出当下的情绪。这是针对于每一条记录的，然后对于每一天的记录，我也希望当我写完日记之后，第二天它能够读取我前一天记录的所有的内容，给我一些指导，对于今天可以要做的事的一些优化。然后是对于本周的情绪日记，它能够识别出我在哪些时间段是心情不好的。然后能够有具体的建议，比如说我的情绪波动大呀，等等等等。我很想有这样一个功能，那我就以它为功能作为，以它为概念作为，顺便去尝试一下AI coding的事情。


# 问题记录
1. Android studio安装，flutter安装，capacity安装，公司电脑上装上了，但是自己的电脑死活装不上，最后就是在公司电脑上调试的。
2. 虚拟机非常慢，最后我都是build出apk，发送到手机上进行验证，这个开发效率很低，还没有找到合适的解决方法。